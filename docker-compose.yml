services:
  # samba:
  #   extends:
  #     file: ./services/samba.yml
  #     service: samba
  #   profiles: ["default"]
  #   user: "1001:3001"

  tailscale:
    extends:
      file: ./services/tailscale.yml
      service: tailscale
    profiles: ["default"]
    user: "1001:3001"

  adguard:
    extends:
      file: ./services/adguard.yml
      service: adguard
    depends_on:
      - unbound
    profiles: ["default"]
    user: "1001:3001"

  unbound:
    extends:
      file: ./services/unbound.yml
      service: unbound
    profiles: ["default"]
    user: "1001:3001"

  caddy:
    extends:
      file: ./services/caddy.yml
      service: caddy
    profiles: ["default"]
    user: "1001:3001"

  homeassistant:
    extends:
      file: ./services/homeassistant.yml
      service: homeassistant
    depends_on:
      - mosquitto
    profiles: ["default"]
    user: "1001:3001"

  mosquitto:
    extends:
      file: ./services/mosquitto.yml
      service: mosquitto
    profiles: ["default"]
    user: "1001:3001"

  watchtower:
    extends:
      file: ./services/watchtower.yml
      service: watchtower
    profiles: ["default"]
    user: "1001:3001"

  portainer:
    extends:
      file: ./services/portainer.yml
      service: portainer
    profiles: ["default"]
    user: "1001:3001"

# Shared network for service communication
networks:
  asteria_network:
    driver: bridge
    name: asteria_network
